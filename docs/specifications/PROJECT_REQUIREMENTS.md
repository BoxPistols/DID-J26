# 日本向けオーバーレイ地図ライブラリ 要件定義

## プロジェクト概要

日本の各種地理データをトグルでオーバーレイ表示できる汎用地図ライブラリ。
オープンソースとして公開し、様々なユースケースに対応する。

## 想定ユースケース

- 不動産・土地調査
- 防災・ハザードマップ
- 物流・配送計画
- 通信エリア確認
- その他、位置情報を扱うアプリケーション

## 機能要件

### レイヤー構成

#### 1. 行政区域
| レイヤー | データソース |
|----------|--------------|
| 人口集中地区（DID） | e-Stat（令和2年） |
| 市区町村境界 | 国土数値情報 |

#### 2. 地理・地形
| レイヤー | データソース |
|----------|--------------|
| 地物 | 国土地理院 |
| 標高 | 国土地理院 |

#### 3. 気象情報（リアルタイム）
| レイヤー | データソース |
|----------|--------------|
| 雨雲 | 気象庁API / OpenWeatherMap |
| 風向・風速 | 気象庁API / OpenWeatherMap |

#### 4. 通信インフラ
| レイヤー | データソース |
|----------|--------------|
| LTEエリア | 各キャリア公開情報 |

### UI要件

- トグルスイッチによるレイヤー表示切替
- レイヤーグループごとの折りたたみ
- 凡例表示
- レイヤー透明度調整
- カスタムレイヤー追加API

### API要件

```typescript
// 使用イメージ
import { JapanMap } from 'japan-overlay-map';

const map = new JapanMap({
  container: 'map',
  center: [139.6917, 35.6895],
  zoom: 10
});

// レイヤー操作
map.layers.did.show();
map.layers.did.hide();
map.layers.did.setOpacity(0.5);

// カスタムレイヤー追加
map.addLayer({
  id: 'custom',
  type: 'geojson',
  data: customGeoJson
});
```

## 技術スタック（候補）

| 項目 | 候補 |
|------|------|
| 地図ライブラリ | MapLibre GL JS / Leaflet |
| フレームワーク | Vanilla JS（React/Vue ラッパー別途） |
| データ形式 | GeoJSON / Vector Tiles |
| 配信形式 | npm パッケージ |
| ビルド | Vite / Rollup |

## ロードマップ

### Phase 1: 基盤
- 地図ライブラリ選定・基本実装
- DIDデータ最新化・表示
- トグルUI実装

### Phase 2: 静的レイヤー
- 行政区域データ統合
- 地理・地形データ統合

### Phase 3: 動的レイヤー
- 気象情報API連携
- 通信エリア統合

### Phase 4: 公開
- npmパッケージ化
- ドキュメント・デモサイト

## 参考リンク

- [e-Stat 統計地理情報システム](https://www.e-stat.go.jp/gis)
- [国土数値情報](https://nlftp.mlit.go.jp/ksj/)
- [国土地理院](https://www.gsi.go.jp/)
