# ドローン飛行プラン地図ライブラリ 要件定義

## プロジェクト概要

ドローンの飛行プラン作成を支援するオープンソース地図ライブラリ。
各種規制エリアや気象情報をトグルでオーバーレイ表示できる。

## 機能要件

### レイヤー構成

#### 1. 禁止エリア
| レイヤー | データソース | 備考 |
|----------|--------------|------|
| 空港など周辺空域 | 国土地理院 / DID | 空港周辺9km等 |
| 人口集中地区（DID） | e-Stat | 令和2年データへ更新 |
| 緊急用務空域 | 国土交通省 | 災害時等の臨時設定 |
| 有人機発着エリア | 要調査 | ヘリポート等 |
| リモートID特定区域 | 要調査 | |

#### 2. 小型無人機等飛行禁止法
| レイヤー | 内容 |
|----------|------|
| レッドゾーン | 飛行禁止区域（国会、皇居、原発等） |
| イエローゾーン | 要注意区域 |

#### 3. 地理情報
| レイヤー | データソース |
|----------|--------------|
| 地物 | 国土地理院 |

#### 4. 天候情報
| レイヤー | データソース |
|----------|--------------|
| 雨雲 | 気象庁API / OpenWeatherMap |
| 風向・風量 | 気象庁API / OpenWeatherMap |

#### 5. 電波情報
| レイヤー | データソース |
|----------|--------------|
| LTEエリア | 各キャリア公開情報 |

### UI要件

- トグルスイッチによるレイヤー表示切替
- レイヤーグループごとの折りたたみ
- 凡例表示
- レイヤー透明度調整（オプション）

## 技術スタック（候補）

| 項目 | 候補 |
|------|------|
| 地図ライブラリ | Mapbox GL JS / MapLibre GL JS / Leaflet |
| フレームワーク | React / Vue / Vanilla JS |
| データ形式 | GeoJSON / Vector Tiles |
| 配信形式 | npm パッケージ |

## データ更新タスク

1. DIDデータ最新化（2010年 → 2020年）
2. 空港周辺空域データ取得
3. 飛行禁止区域データ取得
4. 気象APIの選定・統合

## ロードマップ

### Phase 1: 基盤構築
- 地図ライブラリ選定
- 基本UIの実装
- DIDデータ最新化・表示

### Phase 2: 規制エリア
- 禁止エリアデータ統合
- 飛行禁止法エリア統合

### Phase 3: 動的情報
- 天候情報API連携
- 電波情報統合

### Phase 4: パッケージ化
- npmパッケージとして公開
- ドキュメント整備

## 参考リンク

- [e-Stat 統計地理情報システム](https://www.e-stat.go.jp/gis)
- [国土地理院](https://www.gsi.go.jp/)
- [DIPS（ドローン情報基盤システム）](https://www.dips-reg.mlit.go.jp/)
